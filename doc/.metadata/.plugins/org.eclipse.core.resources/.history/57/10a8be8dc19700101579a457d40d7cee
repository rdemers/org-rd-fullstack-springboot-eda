--
-- DDL for the staging database.
--

-- Database definition.

-- DROP TABLE PUBLIC.REQUEST;
-- DROP TABLE PUBLIC.INVENTORY;
-- DROP TABLE PUBLIC.CUSTOMER;
-- DROP TABLE PUBLIC.PRODUCT;

CREATE TABLE PUBLIC.CUSTOMER (
	CUSTOMER_ID INTEGER NOT NULL AUTO_INCREMENT,
	CODE CHARACTER VARYING(64) NOT NULL,
	DESCRIPTION CHARACTER VARYING(128) NOT NULL,
	CONSTRAINT CUSTOMER_PK PRIMARY KEY (CUSTOMER_ID),
	CONSTRAINT CUSTOMER_UNIQUE UNIQUE (CODE)
);
CREATE UNIQUE INDEX CUSTOMER_UNIQUE_INDEX_5 ON PUBLIC.CUSTOMER (CODE);
CREATE UNIQUE INDEX PRIMARY_KEY_5 ON PUBLIC.CUSTOMER (CUSTOMER_ID);
COMMENT ON TABLE PUBLIC.CUSTOMER IS 'Customer table';
COMMENT ON COLUMN PUBLIC.CUSTOMER.CUSTOMER_ID IS 'Primary key.';
COMMENT ON COLUMN PUBLIC.CUSTOMER.CODE IS 'Code.';
COMMENT ON COLUMN PUBLIC.CUSTOMER.DESCRIPTION IS 'Description.';

CREATE TABLE PUBLIC.PRODUCT (
	PRODUCT_ID INTEGER NOT NULL AUTO_INCREMENT,
	CODE CHARACTER VARYING(64) NOT NULL,
	DESCRIPTION CHARACTER VARYING(128) NOT NULL,
	CONSTRAINT PRODUCT_PK PRIMARY KEY (PRODUCT_ID),
	CONSTRAINT PRODUCT_UNIQUE UNIQUE (CODE)
);
COMMENT ON TABLE PUBLIC.PRODUCT IS 'Product table';
COMMENT ON COLUMN PUBLIC.PRODUCT.PRODUCT_ID IS 'Primary key.';
COMMENT ON COLUMN PUBLIC.PRODUCT.CODE IS 'Code.';
COMMENT ON COLUMN PUBLIC.PRODUCT.DESCRIPTION IS 'Description.';

CREATE TABLE PUBLIC.INVENTORY (
	INVENTORY_ID INTEGER NOT NULL AUTO_INCREMENT,
	PRODUCT_ID INTEGER NOT NULL,
	QTY INTEGER NOT NULL,
	CONSTRAINT INVENTORY_PK PRIMARY KEY (INVENTORY_ID),
	CONSTRAINT INVENTORY_PRODUCT_FK FOREIGN KEY (PRODUCT_ID) REFERENCES PUBLIC.PRODUCT(PRODUCT_ID)
);
CREATE UNIQUE INDEX INVENTORY_INVENTORY_ID_IDX ON PUBLIC.INVENTORY (INVENTORY_ID,PRODUCT_ID);
COMMENT ON TABLE PUBLIC.INVENTORY IS 'Inventory table.';
COMMENT ON COLUMN PUBLIC.INVENTORY.INVENTORY_ID IS 'Primary key.';
COMMENT ON COLUMN PUBLIC.INVENTORY.PRODUCT_ID IS 'Product ID.';
COMMENT ON COLUMN PUBLIC.INVENTORY.QTY IS 'Quantity.';

CREATE TABLE PUBLIC.REQUEST (
	REQUEST_ID INTEGER NOT NULL AUTO_INCREMENT,
	CUSTOMER_ID INTEGER,
	PRODUCT_ID INTEGER,
	QTY INTEGER NOT NULL,
	STATUS INTEGER NOT NULL,
	CONSTRAINT REQUEST_PK PRIMARY KEY (REQUEST_ID),
	CONSTRAINT REQUEST_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES PUBLIC.CUSTOMER(CUSTOMER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT,
	CONSTRAINT REQUEST_PRODUCT_FK FOREIGN KEY (PRODUCT_ID) REFERENCES PUBLIC.PRODUCT(PRODUCT_ID) ON DELETE RESTRICT ON UPDATE RESTRICT
);
CREATE UNIQUE INDEX PRIMARY_KEY_6 ON PUBLIC.REQUEST (REQUEST_ID);
CREATE INDEX REQUEST_CUSTOMER_FK_INDEX_6 ON PUBLIC.REQUEST (CUSTOMER_ID);
CREATE INDEX REQUEST_PRODUCT_FK_INDEX_6 ON PUBLIC.REQUEST (PRODUCT_ID);
